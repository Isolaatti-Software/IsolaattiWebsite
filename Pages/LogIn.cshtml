@page
@model isolaatti_API.Pages.LogIn

@{
    Layout = "Shared/_LayoutWebAppOutside";
    ViewData["Title"] = "Login";
}
@if (Model.NewUser)
{
    <div class="alert alert-info">
        <h1>Welcome, before logging in the first time, verify your email</h1>
        <p>We've sent you a message with a link!</p>
    </div>
}
@if (Model.JustVerifiedEmail)
{
    <div class="alert alert-info">
        <h1>Your email was verified succesfully</h1>
        <p>Now you can log in here or the Android application!</p>
    </div>
}
@if (Model.ChangedPassword)
{
    <div class="alert alert-info">
        Your password was changed successfully, please log in again with the new password.
    </div>
}
<h1><a asp-page="/Index">Isolaatti</a></h1>
<h3>Logging in to Isolaatti</h3>
@if (Model.ExistingSession)
{
    <div class="alert alert-info">
        It seems you are signed in as <strong>@ViewData["GuessedUsername"]</strong>. Do you want to continue?<br><a asp-page="/WebApp/Index">Continue</a>
    </div>
}
<div class="d-flex justify-content-center">
    <form method="POST" style="max-width: 568px">
        @if (Model.WrongCredential)
        {
            <div class="alert alert-danger">
                You entered wrong credential
            </div>
        }
        @if (Model.NotVerifiedEmail)
        {
            <div class="alert alert-danger">
                Please, verify your email, a verification email was sent
            </div>
        }
        <p>Don't have an account? <a asp-page="MakeAccount">Make an account</a></p>
        <hr/>
        <div class="form-group">
            <label for="email_form_control">Email</label>
            <input type="email" name="email" id="email_form_control" class="form-control"
                   value='@ViewData["username_field"]'>
        </div>
        <div class="form-group">
            <label for="password_form_control">Password</label>
            <input type="password" name="password" id="password_form_control" class="form-control">
        </div>
        <div class="d-flex justify-content-center">
            <button class="btn btn-primary" type="submit">Enter</button>
        </div>
    </form>
</div>
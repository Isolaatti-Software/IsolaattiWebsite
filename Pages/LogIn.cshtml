@page
@model isolaatti_API.Pages.LogIn

@{
    Layout = "Shared/_LayoutWebAppOutside";
    ViewData["Title"] = "Login";
}
@if (Model.NewUser)
{
    <div class="alert alert-info">
        <h1>Welcome, before logging in the first time, verify your email</h1>
        <p>We've sent you a message with a link!</p>
    </div>
}
@if (Model.JustVerifiedEmail)
{
    <div class="alert alert-info">
        <h1>Your email was verified succesfully</h1>
        <p>Now you can log in here or the Android application!</p>
    </div>
}
@if (Model.ChangedPassword)
{
    <div class="alert alert-info">
        Your password was changed successfully, please log in again with the new password.
    </div>
}

@if (Model.ExistingSession)
{
    <div class="alert alert-info">
        It seems you are signed in as <strong>@ViewData["GuessedUsername"]</strong>. Do you want to continue?<br><a asp-page="/Index">Continue</a>
    </div>
}

<div class="d-flex col-lg-7 col-md-6 flex-column">
        <h1><a href="/" id="isolaatti-icon"></a> Isolaatti</h1>
        <h3>Say it louder, deeper!</h3>
        <div class="mt-auto p-3">
            <p>We need cookies to keep you signed in in this browser. Please, don't disable cookies.</p>
        </div>
        
    </div>
    
    <div class="col-lg-5 col-md-6 justify-content-end align-items-center">
        <form method="POST" class="sign-in-up-form" asp-antiforgery="false">
            <h4>Sign in</h4>
            <p><a asp-page="MakeAccount">Sign up</a></p>
            @if (Model.WrongCredential)
            {
                <div class="alert alert-danger">
                    You entered wrong credential
                </div>
            }
            @if (Model.NotVerifiedEmail)
            {
                <div class="alert alert-danger">
                    Please, verify your email, a verification email was sent
                </div>
            }
            <div class="form-group">
                <label for="email_form_control">Email</label>
                <input type="email" name="email" id="email_form_control" class="form-control"
                       value='@ViewData["username_field"]' required>
            </div>
            <div class="form-group">
                <label for="password_form_control">Password</label>
                <input type="password" name="password" 
                id="password_form_control" class="form-control" required>
            </div>
            <div class="form-group">
                <a asp-page="ForgotPassword">Forgot password</a>
            </div>
            <div class="d-flex justify-content-center">
                <button class="btn btn-primary" type="submit">Sign in</button>
            </div>
        </form>
    </div>

